<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans|Fjalla+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Carter+One&display=swap" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans+SC|Carter+One&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
    <script defer src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script defer src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <title>QuickLynx | Dashboard</title>
    <style>
        body{
            margin: 0;
        }
        li{
            list-style-type: none;
        }
        .links{
            font-size: 25px;
            font-weight: bolder;
            margin: 10px 0 10px;
        }
        textarea{
            border: 1px solid white;
            margin: 0px 10px 10px;
            border-radius: 15px;
            box-shadow: inset 4px 4px 8px rgba(0,0,0,.1), inset -4px -4px 8px rgba(255, 255, 255, .8); 
            overflow: hidden;
            padding: 5px 5px;
            outline: none;
            background-color: rgba(0,0,0,0);
            width: auto;
        }
        textarea::placeholder{
            font-weight: bolder;
            color:rgb(146, 155, 165)
        }
        .control-img{
            margin: 0 5px 0;
            cursor: pointer;
        }
        .control-img:hover{
            filter: opacity(50%)
        }
        .form-control:focus{
            border-color: #cccccc;
            -webkit-box-shadow: none;
            box-shadow: none;
        }
        .aligner {
          display: flex;
          align-items: center;
          justify-content: space-between;
        }
        
        .aligner-item {
          max-width: 50%;
        }
        
        .aligner-item-top {
          align-self: flex-start;
        }
        
        .aligner-item-bottom {
          align-self: flex-end;
        }
        .upvotedownvote{
            padding: 0;
        }
    </style>
</head>
<body onload="init()">
    <div class="container-fluid">
        <div class="container">
            <div class="row">
                <!-- LEFT COLUMN -->
                <div class="col-3 " style="min-height: 100vh;">
                    <!-- LOGO -->
                    
                    <!-- BUTTONS -->
                    <div class="row sticky-top">
                        <div class="container" style="padding-top: 0px; padding-left: 50px">
                            <div class="row">
                                <ul>
                                    <li>
                                        <div class="row" style="min-height: 75px;">
                                            <h1 style="margin-top: 10px;" class="QuickLynx"><span onclick="location.href='/home/'">QuickLynx</span></h1>
                                        </div>
                                    </li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="/home/" class="navigation-buttons"><i class="fas fa-home nav-links"></i> Home</a></li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="/dashboard/" class="navigation-buttons"><i class="fas fa-columns nav-links"></i> Dash</a></li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="/message/" class="navigation-buttons"><i class="fas fa-comment nav-links"></i> Messages</a></li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="#" class="navigation-buttons"><i class="fas fa-bell nav-links"></i> Notifications</a></li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="#" class="navigation-buttons"><i class="fas fa-video nav-links"></i> Duo</a></li>
                                    <li class="links" style="margin-bottom: 20px;"><a href="/logout/" class="navigation-buttons negative"><i class="fas fa-sign-out-alt" style="color: rgb(231, 106, 106)"></i> Sign Out</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="container" style="padding: 20px;">
                            <!-- <div class="row">
                                <ul>
                                    <li class="links"><a href="#">Materials</a></li>
                                    <li class="links"><a href="#">Attendance</a></li>
                                    <li class="links"><a href="#">Grades</a></li>
                                    <li class="links"><a href="#">Members</a></li>
                                </ul>
                            </div> -->
                        </div>
                    </div>
                </div>
                <!-- MIDDLE COLUMN -->
                <div class="col-6" style="min-height: 100vh;">
                    <!-- HEADER -->
                    <!-- <div class="row border-bottom" style="min-height: 75px; background: rgb(10, 0, 81); color: white">
                        <div class="aligner col">
                            <h3>Dashboard</h3>
                            <span style="font-family: 'Fjalla One', sans-serif;">{{account.account.first_name}}
                                {%if account.account.propix|length == 0 %}
                                    <img src="../media/pictures/default_avatar-2.gif" alt="" style="object-fit: cover; border-radius: 5px; margin: 0 10px 0" height="50px" width="50px">
                                {%endif%}
                                {%if account.account.propix|length > 0 %}
                                    <img src="{{account.account.propix.url}}" alt="" style="object-fit: cover; border-radius: 5px; margin: 0 10px 0" height="50px" width="50px">
                                {%endif%}
                            </span>
                        </div>
                    </div> -->
                    <div class="row header">
                        <div class="aligner col-12" style="margin-top: 10px;">
                            <h3 style="color: rgb(0,0,0); text-shadow: 2px 2px 4px rgba(0,0,0,.2), -2px -2px 4px rgba(255, 255, 255, 1); ">Dashboard</h3>
                            <!-- modal -->
                            <span><span class="your-name" data-toggle="modal" data-target="#editaccount">{{account.account.first_name}}</span>
                                {%if account.account.propix|length == 0 %}
                                    <img src="../media/pictures/default_avatar-2.gif" alt="" style="object-fit: cover; border-radius: 50px; margin: 0 10px 0" height="50px" width="50px">
                                {%endif%}
                                {%if account.account.propix|length > 0 %}
                                    <img src="{{account.account.propix.url}}" alt="" style="object-fit: cover; border-radius: 50px; margin: 0 10px 0" height="50px" width="50px">
                                {%endif%}
                            </span>
                        </div>
                        <div class="col-12">
                            {%if account.account.login.category == "PROFESSOR"%}
                                <div class="row text-center">
                                    <div class="col">
                                        <button class="btn btn-warning btn-sm post-btn" data-toggle="modal" data-target="#myModal" style="margin-bottom: 15px; padding-left: 50px; padding-right: 50px">Create Classroom</button>
                                    </div>
                                </div>
                            {%endif%}
                            {%if account.account.login.category == "STUDENT"%}
                            <form action="/joinclassroom/"method="POST" class="text-center">{%csrf_token%}
                                <input style="margin-top: 10px; margin-bottom: 10px;" type="text" class="col-12" name="token" placeholder="Type token to join classroom and press enter">
                            </form>
                            {%endif%}
                        </div>
                        
                    </div>
                    <!-- COURSES HERE -->
                    <!-- CREATE CLASSROOM SPACE -->
                    
                    <!-- add javascript function to select active and ended classrooms page <br> -->
                    {% now "Y-m-d" as todays_date%}
                    
                    {%for classroom in account.classroom.all%}
                    {%if todays_date > classroom.date_end|date:"Y-m-d"%}
                    {%endif%}
                        <div class="row">
                            {% if classroom.headerpix|length == 0%}
                                <div class="card-selector col text-center row-course" style="color: white; background: rgb(10, 0, 81);" onclick="location.href='/classroom/{{classroom.room_name}}'">
                            {%endif%}
                            {% if classroom.headerpix|length > 0 %}
                                <div class="card-selector col text-center row-course" style="color: white; background: url({{classroom.headerpix.url}}); background-size: cover; background-position:center" onclick="location.href='/classroom/{{classroom.room_name}}'">
                            {%endif%}
                                <p >{%if todays_date < classroom.date_end|date:"Y-m-d"%}<i class="far fa-circle" style="color: rgb(105, 255, 92); font-size: 1rem; vertical-align:5px"></i>{%else%}<i class="far fa-circle" style="color: rgb(255, 92, 92); font-size: 1rem; vertical-align:5px">{%endif%}</i>
                                    &nbsp;{{classroom.room_name}}<br/>
                                    <span style="font-size: 1rem; font-weight: lighter">{{classroom.date_start|date:"M d"}} - {{classroom.date_end|date:"M d Y"}} {{classroom.days}}</span>
                                </p>
                                
                            </div>
                        </div>
                    {%endfor%}
                    
                </div>
                <!-- MODAL HERE FOR CREATING CLASSROOM-->
                <div class="modal" id="myModal">
                    <div class="modal-dialog">
                        <div class="modal-content">

                            <!-- MODAL HEADER -->
                            <div class="modal-header">
                                <span class="modal-title">Create Classroom</span>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            
                            <!-- MODAL BODY -->
                            <div class="modal-body">
                                <form action="/makeclassroom/" method="POST" enctype="multipart/form-data">{%csrf_token%}
                                    <div class="form-group">
                                        <label for="room_name">Classroom Name</label>
                                        <input type="text" name="room_name" class="col" placeholder="Enter Classroom name" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="time_start">Time Start</label>
                                        <input type="time" name="time_start" id="time_start" class="col" required>
                                        <label for="time_end">Time End</label>
                                        <input type="time" name="time_end" id="time_end" class="col" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="days">Days</label>
                                        <input type="text" name="days" id="days" class="col" placeholder="MTh/TF/W/S" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="date_start">Date Start</label>
                                        <input type="date" name="date_start" id="date_start" class="col" required>
                                        <label for="date_end">Date End</label>
                                        <input type="date" name="date_end" id="date_end" class="col" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="year">Year</label>
                                        <input type="text" name="year_start" id="year" class="col" placeholder="Enter Year" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="semester">Semester</label>
                                        <select class="col form-control" id="semester" name="semester" required>
                                            <option value="" style="color:#999">Choose Semester</option>
                                            <option value="FIRST">1st Semester</option>
                                            <option value="SECOND">2nd Semester</option>
                                            <option value="SUMMER">Summer</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="headerpix">Header Picture (Optional)</label>
                                        <input type="file" name="headerpix" id="headerpix" class="form-control-file">
                                    </div>
                                    <button type="submit" class="btn btn-warning post-btn">Create</button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- RIGHT COLUMN -->
                <div class="col-3 text-center sticky-top" style="min-height: 100vh; padding-top: 10px; padding-bottom: 10px">
                    <div class="row text-center" style="margin: 0;">
                        <div class="search-container col">
                            <input type="text" class="search" placeholder="Search..">
                            <!-- <span class="links" style="margin: 0 5px 0;font-size: 15px; align-self:flex-end">Upcoming <i class="control-img far fa-calendar" title="Create Event"></i></span> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>